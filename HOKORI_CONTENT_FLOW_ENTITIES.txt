================================================================================
                    HOKORI - CONTENT-BASED LEARNING FLOW
                         Entity List for ERD Design
================================================================================

I. LUỒNG CONTENT-BASED LEARNING (VietnamJP Style)
=================================================

WORKFLOW CONFIRMED:
N3 Dropdown → Try N3 → Lesson List (21 bài) → Lesson Detail (4 tabs)

II. ENTITY LIST CHO LUỒNG NÀY
==============================

2.1. CORE CONTENT ENTITIES (6 entities):
=========================================

1. JLPT_LEVEL
├── level_id (PK)
├── level_code (N5/N4/N3/N2/N1)
├── level_name
├── description
└── display_order

2. CONTENT_SOURCE  
├── source_id (PK)
├── source_name ("Try N3", "Kanji N3 Matome", "1500 Từ vựng N3")
├── source_type (textbook/vocabulary_set/kanji_set)
├── level_id (FK)
├── description ("Gồm 21 bài viết trong giáo trình Try N3...")
├── total_lessons
├── publisher
├── is_active
└── display_order

3. READING_LESSON
├── lesson_id (PK)
├── source_id (FK)
├── lesson_number (1, 2, 3...)
├── lesson_part (1, 2 - for multi-part lessons)
├── lesson_title_japanese ("初めての富士さん登山")
├── lesson_title_vietnamese ("Lần đầu tiên leo núi Phú Sĩ")
├── lesson_objectives ("できること" content)
├── reading_content_japanese (main text)
├── reading_content_vietnamese (translation)
├── audio_file_url
├── difficulty_score
├── estimated_read_time
├── cultural_notes
├── created_date
└── is_active

4. LESSON_VOCABULARY_EXTRACT
├── extract_id (PK)
├── lesson_id (FK)
├── vocabulary_word ("詳細", "富士さん", "おすすめ")
├── vocabulary_reading ("しょうさい", "ふじさん")
├── meaning_vietnamese
├── meaning_english
├── context_sentences (JSON - câu chứa từ này)
├── highlight_positions (JSON - vị trí highlight trong text)
├── importance_level (1-5)
├── extraction_method (auto_ai/manual)
├── word_type (noun/verb/adjective/etc)
└── usage_notes

5. LESSON_GRAMMAR_EXTRACT
├── extract_id (PK)
├── lesson_id (FK)
├── grammar_pattern ("できること", "〜について", "〜ようになる")
├── pattern_structure
├── meaning_vietnamese
├── example_sentences (JSON - from lesson text)
├── explanation_vietnamese
├── usage_context
├── difficulty_level (1-5)
├── extraction_method (auto_ai/manual)
└── related_patterns (JSON)

6. LESSON_PRACTICE_EXERCISE
├── exercise_id (PK)
├── lesson_id (FK)
├── exercise_type (vocabulary_quiz/grammar_drill/comprehension/writing)
├── questions (JSON array)
├── instructions
├── estimated_time
├── difficulty_level
└── passing_score

2.2. USER INTERACTION ENTITIES (3 entities - OPTIONAL):
=======================================================

7. USER (Simple - if needed)
├── user_id (PK)
├── username
├── email
├── password_hash
├── created_date
└── is_active

8. USER_READING_HISTORY (Optional - simple tracking)
├── history_id (PK)
├── user_id (FK) -- nullable for guest users
├── lesson_id (FK)
├── last_accessed_date
├── access_count
├── current_tab (content/vocabulary/grammar/practice)
└── bookmarked

9. USER_FAVORITES (Optional - bookmarking)
├── favorite_id (PK)
├── user_id (FK)
├── lesson_id (FK)
├── favorited_date
└── notes

III. RELATIONSHIP SUMMARY
=========================

3.1. CORE RELATIONSHIPS:
JLPT_LEVEL (1) → (M) CONTENT_SOURCE
CONTENT_SOURCE (1) → (M) READING_LESSON
READING_LESSON (1) → (M) LESSON_VOCABULARY_EXTRACT
READING_LESSON (1) → (M) LESSON_GRAMMAR_EXTRACT  
READING_LESSON (1) → (M) LESSON_PRACTICE_EXERCISE

3.2. OPTIONAL USER RELATIONSHIPS:
USER (1) → (M) USER_READING_HISTORY
USER (1) → (M) USER_FAVORITES
READING_LESSON (1) → (M) USER_READING_HISTORY
READING_LESSON (1) → (M) USER_FAVORITES

IV. SAMPLE DATA STRUCTURE
=========================

4.1. JLPT_LEVEL:
level_id=3, level_code="N3", level_name="JLPT N3"

4.2. CONTENT_SOURCE:
source_id=1, source_name="Try N3", source_type="textbook", 
level_id=3, description="Gồm 21 bài viết trong giáo trình Try N3...", 
total_lessons=21

4.3. READING_LESSON:
lesson_id=1, source_id=1, lesson_number=1, lesson_part=1,
lesson_title_japanese="初めての富士さん登山",
lesson_title_vietnamese="Lần đầu tiên leo núi Phú Sĩ",
lesson_objectives="できること: 旅行などの初めての経験について、体験したことや考えたこと、感じたことが表現できる。"

4.4. LESSON_VOCABULARY_EXTRACT:
extract_id=1, lesson_id=1, vocabulary_word="詳細",
vocabulary_reading="しょうさい", meaning_vietnamese="chi tiết",
context_sentences=["詳細を見る"], importance_level=3

V. ERD DESIGN NOTES
===================

5.1. START FROM USER (if including user features):
USER → USER_READING_HISTORY → READING_LESSON → CONTENT_SOURCE → JLPT_LEVEL

5.2. OR START FROM JLPT_LEVEL (if pure content focus):
JLPT_LEVEL → CONTENT_SOURCE → READING_LESSON → [VOCABULARY/GRAMMAR/PRACTICE]_EXTRACT

5.3. FOREIGN KEY CONSTRAINTS:
- CONTENT_SOURCE.level_id → JLPT_LEVEL.level_id
- READING_LESSON.source_id → CONTENT_SOURCE.source_id
- LESSON_*_EXTRACT.lesson_id → READING_LESSON.lesson_id
- USER_*.user_id → USER.user_id (if user features included)

5.4. INDEXES NEEDED:
- READING_LESSON: (source_id, lesson_number, lesson_part)
- LESSON_VOCABULARY_EXTRACT: (lesson_id, importance_level)
- LESSON_GRAMMAR_EXTRACT: (lesson_id, difficulty_level)
- USER_READING_HISTORY: (user_id, last_accessed_date)

VI. IMPLEMENTATION PRIORITY
===========================

6.1. PHASE 1 - Core Content (6 entities):
✅ JLPT_LEVEL
✅ CONTENT_SOURCE  
✅ READING_LESSON
✅ LESSON_VOCABULARY_EXTRACT
✅ LESSON_GRAMMAR_EXTRACT
✅ LESSON_PRACTICE_EXERCISE

6.2. PHASE 2 - User Features (3 entities):
⏳ USER
⏳ USER_READING_HISTORY  
⏳ USER_FAVORITES

================================================================================
                              ENTITY LIST COMPLETE
                    Total: 9 entities (6 core + 3 optional user)
                        Ready for ERD Design
================================================================================

NEXT STEPS:
1. Vẽ ERD cho luồng Content-Based Learning này
2. Vẽ ERD riêng cho luồng JLPT Mock Test  
3. Vẽ ERD riêng cho luồng Khóa học (team làm)
4. Ghép 3 ERD lại thành hệ thống hoàn chỉnh

BẠN MUỐN INCLUDE USER ENTITIES KHÔNG?
- Nếu có: Vẽ ERD từ USER ra
- Nếu không: Vẽ ERD từ JLPT_LEVEL ra (pure content)
